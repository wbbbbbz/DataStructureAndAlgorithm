# 第 14 章 网络流模型和最大流问题

- 网络流
  - 有向图，有一个源点(入度为0)， 有一个汇点(出度为0)
  - 边上有非负权值，表示容量。这个容量可以看作可容纳的最大流量
  - 实际上边上需要两个信息，流量/容量
  - 如果达到最大容量，那么这个边就无法访问了
  - 容量限制
  - 平衡限制: 除了源点和汇点，对于每一个点，流入量等于流出量
    - 从原点流出的流量一定等于最终汇入汇点的流量
  - 满足上述限制下，最大流问题：最大能送出的流量是多少？

- Ford-Fulkerson 思想(不是算法，是算法框架)
  - 最大流量是该最大流量路径中最小流量路径填满的情况
    - 比如一条路的容量是2->3->5，那么最大流量只能是2
  - 但是如果随便找一条路径，直接填满，继续找，这个算法是不行的
    - 因为这个流量不一定是最大流量！
    - 但是在寻找的时候可以创造反向的边(抵消原来边的流量)
  - 就是找到路径就注入流量，但是不能只看容量。如果已经有了流量了，那么就可以反向注入流量进行抵消
  - 可以对所有节点建立反向边，反向边的容量就是正向边的流量
    - 残量图(Residual Graph)
  - 原图中的v-w容量为c，流量为f
    - 残量图中的v-w的权值为c-f，ww-v的权值为f
  - 在残量图中继续寻找源点到汇点的路径，但是任意一条边的权值都不能为0
    - 增广路径
  - Ford-Fulkerson思想：
    - 在残量图中不断找增广路径(这时最大流增加了)，并且更新所有边的权值。直到没有增广路径为止
    - O(maxflow \* E)
      - 每一次至少maxflow+1，每一次最差经过所有的边

- Edmonds-Karp算法
  - 创建残量图
  - 使用BFS寻找增广路径
    - BFS需要嵌套在循环之中
  - O(V\*E\*E)
    - 最大V\*E次的maxFlow
    - 在权重大的时候非常适合

- 最大流算法建模
  - [普林斯顿计算机系的Assignment](https://www.cs.princeton.edu/courses/archive/spr03/cos226/assignments/baseball.html)
  - 可以解决分配问题




- 课后拓展
  - 重构